{"ast":null,"code":"import API, { LOGIN_USER_KEY } from '../../API';\nimport { signInAction, signInError, signUpAction, signUpError, signUserStoreAction } from './actions';\nconst api = new API();\nexport const fetchUserFromLocalStorage = () => {\n  return dispatch => {\n    const userJSON = localStorage.getItem(LOGIN_USER_KEY);\n    if (userJSON && userJSON.token !== \"\") {\n      dispatch(signUserStoreAction(JSON.parse(userJSON)));\n    }\n  };\n};\nexport const signUp = (data = {}, onSuccess = null) => {\n  return async dispatch => {\n    return api.signUp(data).then(response => {\n      localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n      dispatch(signUpAction(response));\n      onSuccess();\n    }).catch(error => {\n      var _error$response;\n      const errorData = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || {\n        message: 'Sign-up failed. Please try again.'\n      };\n      dispatch(signUpError(errorData));\n    });\n  };\n};\nexport const signIn = (data = {}, onSuccess = null) => {\n  return async dispatch => {\n    try {\n      const response = await api.signIn(data);\n      localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n      dispatch(signInAction(response));\n      if (onSuccess) onSuccess();\n    } catch (error) {\n      var _error$response2;\n      const errorData = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || {\n        message: 'Sign-in failed. Please try again.'\n      };\n      dispatch(signInError(errorData));\n      throw errorData; // <-- so outer await dispatch(signIn(...)) can catch\n    }\n  };\n};","map":{"version":3,"names":["API","LOGIN_USER_KEY","signInAction","signInError","signUpAction","signUpError","signUserStoreAction","api","fetchUserFromLocalStorage","dispatch","userJSON","localStorage","getItem","token","JSON","parse","signUp","data","onSuccess","then","response","setItem","stringify","catch","error","_error$response","errorData","message","signIn","_error$response2"],"sources":["D:/django projects/hivetechwear/frontend/src/reducks/users/operations.js"],"sourcesContent":["import API, { LOGIN_USER_KEY } from '../../API';\r\nimport { signInAction, signInError, signUpAction, signUpError, signUserStoreAction } from './actions';\r\n\r\nconst api = new API();\r\n\r\n\r\nexport const fetchUserFromLocalStorage = () => {\r\n    return (dispatch) =>{\r\n        const userJSON = localStorage.getItem(LOGIN_USER_KEY);\r\n\r\n        if (userJSON && userJSON.token !== \"\")\r\n        {\r\n            dispatch(signUserStoreAction(JSON.parse(userJSON)));\r\n        }\r\n    };\r\n};\r\n\r\nexport const signUp = (data = {}, onSuccess = null) => {\r\n\treturn async (dispatch) => {\r\n\t\treturn api\r\n\t\t\t.signUp(data)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tlocalStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\r\n\t\t\t\tdispatch(signUpAction(response));\r\n\t\t\t\tonSuccess();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconst errorData = error.response?.data || { message: 'Sign-up failed. Please try again.' };\r\n\t\t\t\tdispatch(signUpError(errorData));\r\n\t\t\t});\r\n\t};\r\n};\r\n\r\nexport const signIn = (data = {}, onSuccess = null) => {\r\n  return async (dispatch) => {\r\n    try {\r\n      const response = await api.signIn(data);\r\n      localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\r\n      dispatch(signInAction(response));\r\n      if (onSuccess) onSuccess();\r\n    } catch (error) {\r\n      const errorData = error.response?.data || { message: 'Sign-in failed. Please try again.' };\r\n      dispatch(signInError(errorData));\r\n      throw errorData;  // <-- so outer await dispatch(signIn(...)) can catch\r\n    }\r\n  };\r\n};\r\n\r\n"],"mappings":"AAAA,OAAOA,GAAG,IAAIC,cAAc,QAAQ,WAAW;AAC/C,SAASC,YAAY,EAAEC,WAAW,EAAEC,YAAY,EAAEC,WAAW,EAAEC,mBAAmB,QAAQ,WAAW;AAErG,MAAMC,GAAG,GAAG,IAAIP,GAAG,CAAC,CAAC;AAGrB,OAAO,MAAMQ,yBAAyB,GAAGA,CAAA,KAAM;EAC3C,OAAQC,QAAQ,IAAI;IAChB,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAACX,cAAc,CAAC;IAErD,IAAIS,QAAQ,IAAIA,QAAQ,CAACG,KAAK,KAAK,EAAE,EACrC;MACIJ,QAAQ,CAACH,mBAAmB,CAACQ,IAAI,CAACC,KAAK,CAACL,QAAQ,CAAC,CAAC,CAAC;IACvD;EACJ,CAAC;AACL,CAAC;AAED,OAAO,MAAMM,MAAM,GAAGA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAEC,SAAS,GAAG,IAAI,KAAK;EACtD,OAAO,MAAOT,QAAQ,IAAK;IAC1B,OAAOF,GAAG,CACRS,MAAM,CAACC,IAAI,CAAC,CACZE,IAAI,CAAEC,QAAQ,IAAK;MACnBT,YAAY,CAACU,OAAO,CAACpB,cAAc,EAAEa,IAAI,CAACQ,SAAS,CAACF,QAAQ,CAAC,CAAC;MAC9DX,QAAQ,CAACL,YAAY,CAACgB,QAAQ,CAAC,CAAC;MAChCF,SAAS,CAAC,CAAC;IACZ,CAAC,CAAC,CACDK,KAAK,CAAEC,KAAK,IAAK;MAAA,IAAAC,eAAA;MACjB,MAAMC,SAAS,GAAG,EAAAD,eAAA,GAAAD,KAAK,CAACJ,QAAQ,cAAAK,eAAA,uBAAdA,eAAA,CAAgBR,IAAI,KAAI;QAAEU,OAAO,EAAE;MAAoC,CAAC;MAC1FlB,QAAQ,CAACJ,WAAW,CAACqB,SAAS,CAAC,CAAC;IACjC,CAAC,CAAC;EACJ,CAAC;AACF,CAAC;AAED,OAAO,MAAME,MAAM,GAAGA,CAACX,IAAI,GAAG,CAAC,CAAC,EAAEC,SAAS,GAAG,IAAI,KAAK;EACrD,OAAO,MAAOT,QAAQ,IAAK;IACzB,IAAI;MACF,MAAMW,QAAQ,GAAG,MAAMb,GAAG,CAACqB,MAAM,CAACX,IAAI,CAAC;MACvCN,YAAY,CAACU,OAAO,CAACpB,cAAc,EAAEa,IAAI,CAACQ,SAAS,CAACF,QAAQ,CAAC,CAAC;MAC9DX,QAAQ,CAACP,YAAY,CAACkB,QAAQ,CAAC,CAAC;MAChC,IAAIF,SAAS,EAAEA,SAAS,CAAC,CAAC;IAC5B,CAAC,CAAC,OAAOM,KAAK,EAAE;MAAA,IAAAK,gBAAA;MACd,MAAMH,SAAS,GAAG,EAAAG,gBAAA,GAAAL,KAAK,CAACJ,QAAQ,cAAAS,gBAAA,uBAAdA,gBAAA,CAAgBZ,IAAI,KAAI;QAAEU,OAAO,EAAE;MAAoC,CAAC;MAC1FlB,QAAQ,CAACN,WAAW,CAACuB,SAAS,CAAC,CAAC;MAChC,MAAMA,SAAS,CAAC,CAAE;IACpB;EACF,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}