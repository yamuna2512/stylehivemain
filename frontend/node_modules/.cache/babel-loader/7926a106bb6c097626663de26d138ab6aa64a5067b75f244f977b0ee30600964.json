{"ast":null,"code":"import API, { LOGIN_USER_KEY } from '../../API';\nimport { signInAction, signInError, signUpAction, signUpError, signUserStoreAction } from './actions';\nconst api = new API();\nexport const fetchUserFromLocalStorage = () => {\n  return dispatch => {\n    const userJSON = localStorage.getItem(LOGIN_USER_KEY);\n    if (userJSON) {\n      const user = JSON.parse(userJSON);\n      if (user.token !== \"\") {\n        dispatch(signUserStoreAction(user));\n      }\n    }\n  };\n};\nexport const signUp = (data = {}, onSuccess = null) => {\n  return async dispatch => {\n    return api.signUp(data).then(response => {\n      localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n      dispatch(signUpAction(response));\n      if (onSuccess) onSuccess();\n    }).catch(error => {\n      var _error$response;\n      const errorData = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || {\n        message: 'Sign-up failed. Please try again.'\n      };\n      dispatch(signUpError(errorData));\n    });\n  };\n};\nexport const signIn = (data = {}, onSuccess = null) => {\n  return async dispatch => {\n    return api.signIn(data).then(response => {\n      localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\n      dispatch(signInAction(response));\n      if (onSuccess) onSuccess();\n    }).catch(error => {\n      var _error$response2;\n      const errorData = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || {\n        message: 'Sign-in failed. Please try again.'\n      };\n      dispatch(signInError(errorData));\n    });\n  };\n};","map":{"version":3,"names":["API","LOGIN_USER_KEY","signInAction","signInError","signUpAction","signUpError","signUserStoreAction","api","fetchUserFromLocalStorage","dispatch","userJSON","localStorage","getItem","user","JSON","parse","token","signUp","data","onSuccess","then","response","setItem","stringify","catch","error","_error$response","errorData","message","signIn","_error$response2"],"sources":["D:/django projects/hivetechwear/frontend/src/reducks/users/operations.js"],"sourcesContent":["import API, { LOGIN_USER_KEY } from '../../API';\r\nimport { signInAction, signInError, signUpAction, signUpError, signUserStoreAction } from './actions';\r\n\r\nconst api = new API();\r\n\r\nexport const fetchUserFromLocalStorage = () => {\r\n    return (dispatch) => {\r\n        const userJSON = localStorage.getItem(LOGIN_USER_KEY);\r\n\r\n        if (userJSON) {\r\n            const user = JSON.parse(userJSON);\r\n            if (user.token !== \"\") {\r\n                dispatch(signUserStoreAction(user));\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nexport const signUp = (data = {}, onSuccess = null) => {\r\n    return async (dispatch) => {\r\n        return api.signUp(data)\r\n            .then((response) => {\r\n                localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\r\n                dispatch(signUpAction(response));\r\n                if (onSuccess) onSuccess();\r\n            })\r\n            .catch((error) => {\r\n                const errorData = error.response?.data || { message: 'Sign-up failed. Please try again.' };\r\n                dispatch(signUpError(errorData));\r\n            });\r\n    };\r\n};\r\n\r\nexport const signIn = (data = {}, onSuccess = null) => {\r\n    return async (dispatch) => {\r\n        return api.signIn(data)\r\n            .then((response) => {\r\n                localStorage.setItem(LOGIN_USER_KEY, JSON.stringify(response));\r\n                dispatch(signInAction(response));\r\n                if (onSuccess) onSuccess();\r\n            })\r\n            .catch((error) => {\r\n                const errorData = error.response?.data || { message: 'Sign-in failed. Please try again.' };\r\n                dispatch(signInError(errorData));\r\n            });\r\n    };\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,IAAIC,cAAc,QAAQ,WAAW;AAC/C,SAASC,YAAY,EAAEC,WAAW,EAAEC,YAAY,EAAEC,WAAW,EAAEC,mBAAmB,QAAQ,WAAW;AAErG,MAAMC,GAAG,GAAG,IAAIP,GAAG,CAAC,CAAC;AAErB,OAAO,MAAMQ,yBAAyB,GAAGA,CAAA,KAAM;EAC3C,OAAQC,QAAQ,IAAK;IACjB,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAACX,cAAc,CAAC;IAErD,IAAIS,QAAQ,EAAE;MACV,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACL,QAAQ,CAAC;MACjC,IAAIG,IAAI,CAACG,KAAK,KAAK,EAAE,EAAE;QACnBP,QAAQ,CAACH,mBAAmB,CAACO,IAAI,CAAC,CAAC;MACvC;IACJ;EACJ,CAAC;AACL,CAAC;AAED,OAAO,MAAMI,MAAM,GAAGA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAEC,SAAS,GAAG,IAAI,KAAK;EACnD,OAAO,MAAOV,QAAQ,IAAK;IACvB,OAAOF,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,CAClBE,IAAI,CAAEC,QAAQ,IAAK;MAChBV,YAAY,CAACW,OAAO,CAACrB,cAAc,EAAEa,IAAI,CAACS,SAAS,CAACF,QAAQ,CAAC,CAAC;MAC9DZ,QAAQ,CAACL,YAAY,CAACiB,QAAQ,CAAC,CAAC;MAChC,IAAIF,SAAS,EAAEA,SAAS,CAAC,CAAC;IAC9B,CAAC,CAAC,CACDK,KAAK,CAAEC,KAAK,IAAK;MAAA,IAAAC,eAAA;MACd,MAAMC,SAAS,GAAG,EAAAD,eAAA,GAAAD,KAAK,CAACJ,QAAQ,cAAAK,eAAA,uBAAdA,eAAA,CAAgBR,IAAI,KAAI;QAAEU,OAAO,EAAE;MAAoC,CAAC;MAC1FnB,QAAQ,CAACJ,WAAW,CAACsB,SAAS,CAAC,CAAC;IACpC,CAAC,CAAC;EACV,CAAC;AACL,CAAC;AAED,OAAO,MAAME,MAAM,GAAGA,CAACX,IAAI,GAAG,CAAC,CAAC,EAAEC,SAAS,GAAG,IAAI,KAAK;EACnD,OAAO,MAAOV,QAAQ,IAAK;IACvB,OAAOF,GAAG,CAACsB,MAAM,CAACX,IAAI,CAAC,CAClBE,IAAI,CAAEC,QAAQ,IAAK;MAChBV,YAAY,CAACW,OAAO,CAACrB,cAAc,EAAEa,IAAI,CAACS,SAAS,CAACF,QAAQ,CAAC,CAAC;MAC9DZ,QAAQ,CAACP,YAAY,CAACmB,QAAQ,CAAC,CAAC;MAChC,IAAIF,SAAS,EAAEA,SAAS,CAAC,CAAC;IAC9B,CAAC,CAAC,CACDK,KAAK,CAAEC,KAAK,IAAK;MAAA,IAAAK,gBAAA;MACd,MAAMH,SAAS,GAAG,EAAAG,gBAAA,GAAAL,KAAK,CAACJ,QAAQ,cAAAS,gBAAA,uBAAdA,gBAAA,CAAgBZ,IAAI,KAAI;QAAEU,OAAO,EAAE;MAAoC,CAAC;MAC1FnB,QAAQ,CAACN,WAAW,CAACwB,SAAS,CAAC,CAAC;IACpC,CAAC,CAAC;EACV,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}